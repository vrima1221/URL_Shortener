(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(29),i=n.n(a),s=n(11),o=(n(38),n(39),n(3)),u=n(2),l=function(){return Object(u.jsx)("h1",{children:"Page not found"})},j=n(8),b=n(4),h=n.n(b),d=n(6),f=n(5),O=n(24),p=n(33),x="https://localhost:7097/ShortUrl";function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:t};return n&&(r.body=JSON.stringify(n),r.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch(x+e,r).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(e){return console.log(e)}))}var m=function(e){return v(e)},g=function(e,t){return v(e,"POST",t)},U=function(e){return v(e,"DELETE")},y=function(e){return m("/Get?id=".concat(e))},w=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("/GetAll"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=(n(46),function(e){var t=e.message,n=e.isError;return Object(u.jsx)("div",{className:"error-notification",hidden:!n,children:t})}),R=function(e){var t=e.isError,n=e.errorMessage,r=e.onChange,c=e.currentUrl,a=e.onSubmit;return Object(u.jsxs)("form",{action:"",onSubmit:a,children:[Object(u.jsx)("input",{type:"url",placeholder:"Input URL to shrink",value:c,onChange:function(e){return r(e.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"Shrink"}),Object(u.jsx)(S,{isError:t,message:n})]})},E=(n(47),n(48),function(e){var t=e.url,n=e.onRemove,r=t.fullUrl,c=t.shortUrl,a=t.id;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"fullUrl",children:Object(u.jsx)("a",{href:r,children:r})}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:r,children:c})}),Object(u.jsx)("td",{children:Object(u.jsx)(s.b,{to:"/".concat(a),children:"More"})}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{type:"button",onClick:function(){return n(a)},children:"\u2716"})})]})}),L=function(e){var t=e.urls,n=e.onRemove;return Object(u.jsxs)("table",{className:"table",children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Full URL"}),Object(u.jsx)("th",{children:"Short URL"}),Object(u.jsx)("th",{children:"More"}),Object(u.jsx)("th",{children:"Remove"})]}),t.map((function(e){return Object(u.jsx)(E,{url:e,onRemove:n},e.id)}))]})},k=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(f.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(""),b=Object(f.a)(l,2),x=b[0],v=b[1],m=Object(r.useState)(""),y=Object(f.a)(m,2),S=y[0],E=y[1],k=function(e){o(!0),v(e),setTimeout((function(){return o(!1)}),3e3)},C=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(t=e.sent)&&c(t.value);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){try{C()}catch(e){k("Unable to load URLs!")}}),[]);var M=Object(r.useMemo)((function(){return n}),[n]),N=M.some((function(e){return e.fullUrl===S}));return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{children:"URL Shortener"}),Object(u.jsx)(R,{isError:s,errorMessage:x,onChange:E,currentUrl:S,onSubmit:function(e){if(e.preventDefault(),N)return k("URL is already shortened!"),void E("");if(!S.trim())return k("Please input your URL!"),void E("");var t="short.ly/".concat(S.replace(/[^a-z]/g,"").slice(-4)),n={id:0,fullUrl:S,shortUrl:t};E(""),function(e){return g("/CreateEdit",Object(p.a)({},e))}(n).then((function(e){return c((function(t){return[].concat(Object(j.a)(t),[e.value])}))}))}}),0!==M.length?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(L,{urls:M,onRemove:function(e){var t;(t=e,U("/Delete?id=".concat(t))).then((function(){return c((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(){return k("Unable to delete URL!")}))}})}):Object(u.jsx)(O.a,{visible:!0,height:"80",width:"80",ariaLabel:"dna-loading",wrapperStyle:{},wrapperClass:"dna-wrapper"})]})},C=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"About"}),Object(u.jsx)(s.b,{to:"/shortener",children:"Lets try!"})]})},M=function(){var e=Object(o.p)().id,t=Object(r.useState)(null),n=Object(f.a)(t,2),c=n[0],a=n[1],i=function(){var t=Object(d.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,y(n);case 3:r=t.sent,a(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i(e)}),[]),console.log(c),Object(u.jsx)(u.Fragment,{children:c?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"URL Info page"}),Object(u.jsx)("p",{children:c.value.fullUrl}),Object(u.jsx)("p",{children:c.value.shortUrl})]}):Object(u.jsx)(O.a,{visible:!0,height:"80",width:"80",ariaLabel:"dna-loading",wrapperStyle:{},wrapperClass:"dna-wrapper"})})},N=function(){return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/",element:Object(u.jsx)(C,{})}),Object(u.jsx)(o.b,{path:"*",element:Object(u.jsx)(l,{})}),Object(u.jsx)(o.b,{path:"/home",element:Object(u.jsx)(o.a,{to:"/",replace:!0})}),Object(u.jsx)(o.b,{path:"/shortener",element:Object(u.jsx)(k,{})}),Object(u.jsx)(o.b,{path:"/:id",element:Object(u.jsx)(M,{})})]})})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(N,{})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.8ad41cfd.chunk.js.map